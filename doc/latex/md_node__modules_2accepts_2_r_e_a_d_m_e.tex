\chapter{accepts}
\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e}{}\label{md_node__modules_2accepts_2_r_e_a_d_m_e}\index{accepts@{accepts}}
\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md35}%
\Hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md35}%


\href{https://npmjs.org/package/accepts}{\texttt{ }} \href{https://npmjs.org/package/accepts}{\texttt{ }} \href{https://nodejs.org/en/download}{\texttt{ }} \href{https://github.com/jshttp/accepts/actions/workflows/ci.yml}{\texttt{ }} \href{https://coveralls.io/r/jshttp/accepts?branch=master}{\texttt{ }}

Higher level content negotiation based on \href{https://www.npmjs.com/package/negotiator}{\texttt{ negotiator}}. Extracted from \href{https://www.npmjs.com/package/koa}{\texttt{ koa}} for general use.

In addition to negotiator, it allows\+:


\begin{DoxyItemize}
\item Allows types as an array or arguments list, ie `(\mbox{[}\textquotesingle{}text/html', \textquotesingle{}application/json\textquotesingle{}\mbox{]}){\ttfamily  as well as}(\textquotesingle{}text/html\textquotesingle{}, \textquotesingle{}application/json\textquotesingle{}){\ttfamily .}
\item {\ttfamily Allows type shorthands such as}json{\ttfamily .}
\item {\ttfamily Returns}false{\ttfamily when no types match}
\item {\ttfamily Treats non-\/existent headers as}\texorpdfstring{$\ast$}{*}\`{}
\end{DoxyItemize}\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md36}{}\doxysection{\texorpdfstring{Installation}{Installation}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md36}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ install\ accepts}

\end{DoxyCode}
\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md37}{}\doxysection{\texorpdfstring{API}{API}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md37}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ accepts\ =\ \mbox{\hyperlink{test-core-js_8js_a2fc998a372f1531668f7047d0878effe}{require}}(\textcolor{stringliteral}{'accepts'})}

\end{DoxyCode}
\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md38}{}\doxysubsection{\texorpdfstring{accepts(req)}{accepts(req)}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md38}
Create a new {\ttfamily Accepts} object for the given {\ttfamily req}.\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md39}{}\doxysubsubsection{\texorpdfstring{.charset(charsets)}{.charset(charsets)}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md39}
Return the first accepted charset. If nothing in {\ttfamily charsets} is accepted, then {\ttfamily false} is returned.\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md40}{}\doxysubsubsection{\texorpdfstring{.charsets()}{.charsets()}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md40}
Return the charsets that the request accepts, in the order of the client\textquotesingle{}s preference (most preferred first).\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md41}{}\doxysubsubsection{\texorpdfstring{.encoding(encodings)}{.encoding(encodings)}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md41}
Return the first accepted encoding. If nothing in {\ttfamily encodings} is accepted, then {\ttfamily false} is returned.\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md42}{}\doxysubsubsection{\texorpdfstring{.encodings()}{.encodings()}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md42}
Return the encodings that the request accepts, in the order of the client\textquotesingle{}s preference (most preferred first).\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md43}{}\doxysubsubsection{\texorpdfstring{.language(languages)}{.language(languages)}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md43}
Return the first accepted language. If nothing in {\ttfamily languages} is accepted, then {\ttfamily false} is returned.\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md44}{}\doxysubsubsection{\texorpdfstring{.languages()}{.languages()}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md44}
Return the languages that the request accepts, in the order of the client\textquotesingle{}s preference (most preferred first).\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md45}{}\doxysubsubsection{\texorpdfstring{.type(types)}{.type(types)}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md45}
Return the first accepted type (and it is returned as the same text as what appears in the {\ttfamily types} array). If nothing in {\ttfamily types} is accepted, then {\ttfamily false} is returned.

The {\ttfamily types} array can contain full MIME types or file extensions. Any value that is not a full MIME types is passed to `require(\textquotesingle{}mime-\/types').lookup\`{}.\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md46}{}\doxysubsubsection{\texorpdfstring{.types()}{.types()}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md46}
Return the types that the request accepts, in the order of the client\textquotesingle{}s preference (most preferred first).\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md47}{}\doxysection{\texorpdfstring{Examples}{Examples}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md47}
\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md48}{}\doxysubsection{\texorpdfstring{Simple type negotiation}{Simple type negotiation}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md48}
This simple example shows how to use {\ttfamily accepts} to return a different typed respond body based on what the client wants to accept. The server lists it\textquotesingle{}s preferences in order and will get back the best match between the client and server.


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ accepts\ =\ \mbox{\hyperlink{test-core-js_8js_a2fc998a372f1531668f7047d0878effe}{require}}(\textcolor{stringliteral}{'accepts'})}
\DoxyCodeLine{var\ \mbox{\hyperlink{application_8js_a55f22d498ca401fddca364855629d1d3}{http}}\ =\ \mbox{\hyperlink{test-core-js_8js_a2fc998a372f1531668f7047d0878effe}{require}}('\mbox{\hyperlink{application_8js_a55f22d498ca401fddca364855629d1d3}{http}}')}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{cors_2lib_2index_8js_ac2ffb26d6f42d3bbcd7847b0873403f4}{function}}\ \mbox{\hyperlink{application_8js_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}\ (\mbox{\hyperlink{express_8js_a42c43c76081a7df8ae2954f16ee9338b}{req}},\ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}})\ \{}
\DoxyCodeLine{\ \ var\ accept\ =\ accepts(\mbox{\hyperlink{express_8js_a42c43c76081a7df8ae2954f16ee9338b}{req}})}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ the\ order\ of\ this\ list\ is\ significant;\ should\ be\ server\ preferred\ order}}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{switch}\ (accept.type([\textcolor{stringliteral}{'json'},\ \textcolor{stringliteral}{'html'}]))\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{'json'}:}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.setHeader(\textcolor{stringliteral}{'Content-\/Type'},\ \textcolor{stringliteral}{'application/json'})}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.write(\textcolor{stringliteral}{'\{"{}hello"{}:"{}world!"{}\}'})}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{'html'}:}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.setHeader(\textcolor{stringliteral}{'Content-\/Type'},\ \textcolor{stringliteral}{'text/html'})}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.write(\textcolor{stringliteral}{'<b>hello,\ world!</b>'})}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{comment}{//\ the\ fallback\ is\ text/plain,\ so\ no\ need\ to\ specify\ it\ above}}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.setHeader(\textcolor{stringliteral}{'Content-\/Type'},\ \textcolor{stringliteral}{'text/plain'})}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.write(\textcolor{stringliteral}{'hello,\ world!'})}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{express_8js_abde3c35e3bb7e5225dd7f234c685329c}{res}}.end()}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{application_8js_a55f22d498ca401fddca364855629d1d3}{http}}.createServer(\mbox{\hyperlink{application_8js_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}).listen(3000)}

\end{DoxyCode}


You can test this out with the c\+URL program\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{curl\ -\/I\ -\/H'Accept:\ text/html'\ http://localhost:3000/}

\end{DoxyCode}
\hypertarget{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md49}{}\doxysection{\texorpdfstring{License}{License}}\label{md_node__modules_2accepts_2_r_e_a_d_m_e_autotoc_md49}
\mbox{[}MIT\mbox{]}(LICENSE) 